- name: Batch Wipe 30 Workflow Runs
  env:
    GH_TOKEN: ${{ secrets.GITHUB_TOKEN }}
  run: |
    # Use the github.repository context to fill :owner/:repo
    echo "Scanning for last 30 runs in ${{ github.repository }}..."
    
    gh api "repos/${{ github.repository }}/actions/runs?per_page=30" | \
    jq -r '.workflow_runs[].id' | \
    while read -r run_id; do
      if [ "$run_id" != "${{ github.run_id }}" ]; then
        echo "Wiping Run ID: $run_id"
        gh api -X DELETE "repos/${{ github.repository }}/actions/runs/$run_id" --silent
      fi
    done
