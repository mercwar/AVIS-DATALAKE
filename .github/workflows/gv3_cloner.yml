name: Gemini V3 - Cloning & V3 Migration
on:
  push:
    paths:
      - 'kb_packets/initial_launch.kb'

jobs:
  cloning-migration:
    runs-on: ubuntu-latest
    env:
      MERC_G_PAT: ${{ secrets.MERC_G_PAT }}
    steps:
      - uses: actions/checkout@v4

      - name: üõ†Ô∏è Build Cloner Engine
        run: gcc src/core/firegem_kb_loader.c -o fvs_loader

      - name: üîó FVS_IO:CLONE_BEGIN_SEED
        run: |
          # 1. Authenticated Clone of Robo-Knight-Demos
          git clone https://$MERC_G_PAT@://github.com temp_seed
          
          # 2. Materialize Version 2 Bridge
          ./fvs_loader kb_packets/initial_launch.kb "GEMINI/VERSION 2/cloner_setup.c"
          
          # 3. MIGRATION: Flash Seed into VERSION 3
          # Using the cloner's power to build the V3 path
          mkdir -p "GEMINI/VERSION 3/v1.04_core"
          cp -r "temp_seed/Standard C/AI_AVIS_FVS_v1.04/"* "GEMINI/VERSION 3/v1.04_core/"

      - name: üü¢ FVS_IO:VERIFY_V3
        run: |
          echo "--- VERSION 3 SECTOR CHECK ---"
          ls -R "GEMINI/VERSION 3/"
