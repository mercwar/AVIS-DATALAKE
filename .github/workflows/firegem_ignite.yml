name: G-V3 Sector Ignition
on:
  push:
    paths:
      - 'kb_packets/initial_launch.kb'

jobs:
  materialize-v3:
    runs-on: ubuntu-latest
    permissions:
      contents: write
    steps:
      - name: 1. Checkout AVIS-DATALAKE
        uses: actions/checkout@v4
        with:
          token: ${{ secrets.MERC_G_PAT }}

      - name: 2. Build G-V3 Loader (The Key)
        # This compiles the loader so we don't need the missing .so file
        run: gcc src/core/firegem_kb_loader.c -o loader

     - name: ðŸ”— FVS_IO:CLONE_V1.04_SEED
env:
MERC_G_PAT: ${{ secrets.MERC_G_PAT }}
run: |
# 1. Authenticated Clone of Robo-Knight-Demos (FIXED URL)
# Format: github.com
git clone "https://$MERC_G_PAT@github.com" temp_seed
# 2. Materialize the Version 3 Sector Path
# This creates the directories for the C-loader to write into
mkdir -p "GEMINI/VERSION 3/core_v1.04"
# 3. Decode G-V3 Launch Sequence from KB
./loader kb_packets/initial_launch.kb "GEMINI/VERSION 3/v3_init.c"
# 4. Flash the v1.04 Seed into the new Directory
cp -r temp_seed/"Standard C/AI_AVIS_FVS_v1.04/"* "GEMINI/VERSION 3/core_v1.04/"
# 5. Clean up temp folder
rm -rf temp_seed
      - name: 4. FVS_IO:PUSH_TO_SURFACE
        run: |
          git config --global user.name "FireGem-Bot"
          git config --global user.email "bot@firegem.ai"
          git add "GEMINI/VERSION 3/"
          git commit -m "FVS_IO: GEMINI VERSION 3 Sector Materialized" || echo "No changes"
          git push
